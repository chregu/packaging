NAME=@PACKAGENAME@
VERSION=@VERSION@
MAINTAINER=@MAINTAINER@
PACKAGENAME=@PACKAGENAME@
URL=@URL@
DEPENDS=@DEPENDS@
EXCLUDE=@EXCLUDE@
MAINTAINER=@MAINTAINER@
DESCRIPTION=@DESCRIPTION@
POSTINST=@POSTINST@
PREINST=@PREINST@
POSTRM=@POSTRM@
PRERM=@PRERM@
TMP=tmp
PTMP=$(TMP)/$(PACKAGENAME)

clean:
	rm -rf tmp

structure: clean
	mkdir -p $(PTMP)/src $(PTMP)/build $(PTMP)/misc
	rsync -r * --exclude $(TMP) $(PTMP)/src

package: structure
	fpm -s dir -t deb -n "$(PACKAGENAME)" -v "$(VERSION)" -m "$(MAINTAINER)" --url "$(URL)" \
		$(DEPENDS) $(EXCLUDE) $(POSTINST) $(PREINST) $(POSTRM) $(PRERM) \
		-x packaging -x packaging_config.php -x ".git*" -x Makefile -a i386 $(PTMP)/build

